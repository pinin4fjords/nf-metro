{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"nf-metro","text":"<p>Generate metro-map-style SVG diagrams from Mermaid graph definitions with <code>%%metro</code> directives. Designed for visualizing bioinformatics pipeline workflows (e.g., nf-core pipelines) as transit-style maps where each analysis route is a colored \"metro line.\"</p> <p></p>"},{"location":"#installation","title":"Installation","text":""},{"location":"#pip-pypi","title":"pip (PyPI)","text":"<pre><code>pip install nf-metro\n</code></pre>"},{"location":"#conda-bioconda","title":"Conda (Bioconda)","text":"<pre><code>conda install bioconda::nf-metro\n</code></pre>"},{"location":"#container-seqera-containers","title":"Container (Seqera Containers)","text":"<p>A pre-built container is available via Seqera Containers:</p> <pre><code>docker pull community.wave.seqera.io/library/pip_nf-metro:611b1ba39c6007f1\n</code></pre> <p>Requires Python 3.10+.</p>"},{"location":"#quick-start","title":"Quick start","text":"<p>Render a metro map from a <code>.mmd</code> file:</p> <pre><code>nf-metro render examples/simple_pipeline.mmd -o pipeline.svg\n</code></pre> <p>Validate your input without rendering:</p> <pre><code>nf-metro validate examples/simple_pipeline.mmd\n</code></pre> <p>Inspect structure (sections, lines, stations):</p> <pre><code>nf-metro info examples/simple_pipeline.mmd\n</code></pre>"},{"location":"#cli-reference","title":"CLI reference","text":""},{"location":"#nf-metro-render","title":"<code>nf-metro render</code>","text":"<p>Render a Mermaid metro map definition to SVG.</p> <pre><code>nf-metro render [OPTIONS] INPUT_FILE\n</code></pre> Option Default Description <code>-o</code>, <code>--output PATH</code> <code>&lt;input&gt;.svg</code> Output SVG file path <code>--theme [nfcore\\|light]</code> <code>nfcore</code> Visual theme <code>--width INTEGER</code> auto SVG width in pixels <code>--height INTEGER</code> auto SVG height in pixels <code>--x-spacing FLOAT</code> <code>60</code> Horizontal spacing between layers <code>--y-spacing FLOAT</code> <code>40</code> Vertical spacing between tracks <code>--max-layers-per-row INTEGER</code> auto Max layers before folding to next row <code>--animate / --no-animate</code> off Add animated balls traveling along lines <code>--debug / --no-debug</code> off Show debug overlay <code>--logo PATH</code> none Logo image path (overrides <code>%%metro logo:</code> directive) <code>--from-nextflow</code> off Convert Nextflow <code>-with-dag</code> input before rendering <code>--title TEXT</code> none Pipeline title (used with <code>--from-nextflow</code>)"},{"location":"#nf-metro-convert","title":"<code>nf-metro convert</code>","text":"<p>Convert a Nextflow <code>-with-dag</code> mermaid file to nf-metro format.</p> <pre><code>nf-metro convert [OPTIONS] INPUT_FILE\n</code></pre> Option Default Description <code>-o</code>, <code>--output PATH</code> stdout Output <code>.mmd</code> file path <code>--title TEXT</code> auto Pipeline title <p>See Importing from Nextflow for details and examples.</p>"},{"location":"#nf-metro-validate","title":"<code>nf-metro validate</code>","text":"<p>Check a <code>.mmd</code> file for errors without producing output.</p> <pre><code>nf-metro validate INPUT_FILE\n</code></pre>"},{"location":"#nf-metro-info","title":"<code>nf-metro info</code>","text":"<p>Print a summary of the parsed map: sections, lines, stations, and edges.</p> <pre><code>nf-metro info INPUT_FILE\n</code></pre>"},{"location":"#writing-metro-maps","title":"Writing metro maps","text":"<p>Read the Guide to learn how to write <code>.mmd</code> files, from minimal examples to multi-section pipelines with custom grid layouts.</p>"},{"location":"#gallery","title":"Gallery","text":"<p>See the Gallery for rendered examples covering simple pipelines, complex multi-line topologies, fan-out/fan-in patterns, fold layouts, and realistic bioinformatics workflows.</p>"},{"location":"#license","title":"License","text":"<p>MIT</p>"},{"location":"guide/","title":"Writing metro maps","text":"<p>nf-metro turns text descriptions of pipelines into metro-map-style diagrams. Input files use a subset of Mermaid <code>graph LR</code> syntax, extended with <code>%%metro</code> directives for colors, sections, and layout control.</p> <p>This guide builds up the format step by step, starting from a flat list of stations and finishing with a multi-section pipeline that fans out, changes direction, and reconverges.</p>"},{"location":"guide/#1-stations-lines-and-edges","title":"1. Stations, lines, and edges","text":"<p>The simplest metro map needs three things: lines (colored routes), stations (pipeline steps), and edges (connections that carry lines between stations).</p> <pre><code>%%metro title: Simple Pipeline\n%%metro style: dark\n%%metro line: main | Main | #4CAF50\n%%metro line: qc | Quality Control | #2196F3\n\ngraph LR\n    input[Input]\n    fastqc[FastQC]\n    trim[Trimming]\n    align[Alignment]\n    quant[Quantification]\n    multiqc[MultiQC]\n\n    input --&gt;|main| trim\n    trim --&gt;|main| align\n    align --&gt;|main| quant\n    input --&gt;|qc| fastqc\n    trim --&gt;|qc| fastqc\n    quant --&gt;|qc| multiqc\n    fastqc --&gt;|qc| multiqc\n</code></pre> <p></p> <p>A few things to notice:</p> <ul> <li><code>%%metro line:</code> defines a route as <code>id | Display Name | #hexcolor</code>. Every edge must reference one of these IDs.</li> <li><code>graph LR</code> starts the Mermaid graph. nf-metro always uses left-to-right flow at the top level.</li> <li>Stations use Mermaid node syntax: <code>node_id[Label]</code>.</li> <li>Edges carry a line ID: <code>source --&gt;|line_id| target</code>. An edge can carry multiple lines at once: <code>a --&gt;|line1,line2| b</code>.</li> </ul> <p>Without sections, all stations sit on a single track. That works for simple pipelines, but real workflows have logical groupings.</p>"},{"location":"guide/#2-grouping-stations-into-sections","title":"2. Grouping stations into sections","text":"<p>Sections wrap related stations in visual boxes using Mermaid <code>subgraph</code> blocks. This makes the diagram easier to read and lets the layout engine route lines between groups automatically.</p> <pre><code>%%metro title: Sectioned Pipeline\n%%metro style: dark\n%%metro line: main | Main | #4CAF50\n%%metro line: qc | Quality Control | #2196F3\n\ngraph LR\n    subgraph preprocessing [Pre-processing]\n        input[Input]\n        trim[Trimming]\n        fastqc[FastQC]\n        input --&gt;|main,qc| trim\n        trim --&gt;|main,qc| fastqc\n    end\n\n    subgraph analysis [Analysis]\n        align[Alignment]\n        quant[Quantification]\n        align --&gt;|main| quant\n    end\n\n    subgraph reporting [Reporting]\n        multiqc[MultiQC]\n        report[Report]\n        multiqc --&gt;|qc| report\n    end\n\n    fastqc --&gt;|main| align\n    fastqc --&gt;|qc| multiqc\n</code></pre> <p></p> <p>There is one important rule: edges between stations in different sections must go outside all <code>subgraph</code>/<code>end</code> blocks. The three inter-section edges at the bottom of the file connect Pre-processing to Analysis and Reporting.</p> <p>nf-metro places sections on a grid automatically based on their dependencies. It also creates port connections at section boundaries and junction stations where lines diverge.</p>"},{"location":"guide/#3-fan-out-and-fan-in","title":"3. Fan-out and fan-in","text":"<p>When lines diverge from a shared section into separate analysis paths and then reconverge, nf-metro stacks the target sections vertically and routes each line to its destination:</p> <pre><code>%%metro title: Fan-out Pipeline\n%%metro style: dark\n%%metro line: wgs | Whole Genome | #e63946\n%%metro line: wes | Whole Exome | #0570b0\n%%metro line: panel | Targeted Panel | #2db572\n\ngraph LR\n    subgraph preprocessing [Pre-processing]\n        fastqc[FastQC]\n        trim[Trimming]\n        fastqc --&gt;|wgs,wes,panel| trim\n    end\n\n    subgraph wgs_analysis [WGS Analysis]\n        bwa_wgs[BWA-MEM]\n        gatk_wgs[GATK HaplotypeCaller]\n        bwa_wgs --&gt;|wgs| gatk_wgs\n    end\n\n    subgraph wes_analysis [WES Analysis]\n        bwa_wes[BWA-MEM]\n        gatk_wes[GATK Mutect2]\n        bwa_wes --&gt;|wes| gatk_wes\n    end\n\n    subgraph panel_analysis [Panel Analysis]\n        minimap[Minimap2]\n        freebayes[FreeBayes]\n        minimap --&gt;|panel| freebayes\n    end\n\n    subgraph annotation [Annotation]\n        vep[VEP]\n        report[Report]\n        vep --&gt;|wgs,wes,panel| report\n    end\n\n    trim --&gt;|wgs| bwa_wgs\n    trim --&gt;|wes| bwa_wes\n    trim --&gt;|panel| minimap\n    gatk_wgs --&gt;|wgs| vep\n    gatk_wes --&gt;|wes| vep\n    freebayes --&gt;|panel| vep\n</code></pre> <p></p> <p>Each line takes a different route through its own analysis section, then all three reconverge at annotation. The layout engine handles junction creation, vertical stacking, and routing automatically. You don't need to specify any positions or port sides.</p>"},{"location":"guide/#4-section-directions","title":"4. Section directions","text":"<p>By default every section flows left-to-right (<code>LR</code>). You can change a section's internal flow direction with <code>%%metro direction:</code> to create more compact or visually interesting layouts.</p> <p>This example adds a top-to-bottom (<code>TB</code>) section that acts as a vertical connector between the fan-out analysis paths and the final reporting section:</p> <pre><code>%%metro title: Section Directions\n%%metro style: dark\n%%metro line: rna | RNA-seq | #2db572\n%%metro line: dna | DNA-seq | #e63946\n%%metro legend: bl\n\ngraph LR\n    subgraph preprocessing [Pre-processing]\n        fastqc[FastQC]\n        trim[Trimming]\n        fastqc --&gt;|rna,dna| trim\n    end\n    subgraph rna_analysis [RNA Analysis]\n        star[STAR]\n        salmon[Salmon]\n        star --&gt;|rna| salmon\n    end\n    subgraph dna_analysis [DNA Analysis]\n        bwa[BWA-MEM]\n        gatk[GATK]\n        bwa --&gt;|dna| gatk\n    end\n    subgraph postprocessing [Post-processing]\n        %%metro direction: TB\n        samtools[SAMtools]\n        picard[Picard]\n        bedtools[BEDTools]\n        samtools --&gt;|rna,dna| picard\n        picard --&gt;|rna,dna| bedtools\n    end\n    subgraph reporting [Reporting]\n        multiqc[MultiQC]\n        report[Report]\n        multiqc --&gt;|rna,dna| report\n    end\n    trim --&gt;|rna| star\n    trim --&gt;|dna| bwa\n    salmon --&gt;|rna| samtools\n    gatk --&gt;|dna| samtools\n    bedtools --&gt;|rna,dna| multiqc\n</code></pre> <p></p> <p>The Post-processing section flows top-to-bottom, collecting the RNA and DNA lines from the sections above and below, then handing them off horizontally to Reporting. The only change from a normal section is the single <code>%%metro direction: TB</code> directive.</p> <p>The available directions are:</p> <ul> <li><code>LR</code> (default) -- left to right</li> <li><code>TB</code> -- top to bottom, useful for vertical connector sections</li> <li><code>RL</code> -- right to left, used automatically by the layout engine for serpentine folds in long pipelines</li> </ul>"},{"location":"guide/#5-putting-it-all-together","title":"5. Putting it all together","text":"<p>The nf-core/rnaseq example at <code>examples/rnaseq_auto.mmd</code> combines all of these patterns in a real-world pipeline:</p> <p></p> <p>Five analysis routes share preprocessing, fan out to different aligners, reconverge at post-processing (a <code>TB</code> section), and fold back through QC (an <code>RL</code> section that creates a serpentine return path). The layout engine infers section directions, grid positions, and port sides automatically from the graph topology.</p> <p>See the Gallery for more rendered examples.</p>"},{"location":"guide/#directive-reference","title":"Directive reference","text":""},{"location":"guide/#global-directives","title":"Global directives","text":"<p>These go at the top of the file, before <code>graph LR</code>.</p> Directive Description <code>%%metro title: &lt;text&gt;</code> Map title <code>%%metro logo: &lt;path&gt;</code> Logo image (replaces title text). Use <code>--logo</code> CLI flag to override per-render. <code>%%metro style: &lt;name&gt;</code> Theme: <code>dark</code> (default) or <code>light</code> <code>%%metro line: &lt;id&gt; \\| &lt;name&gt; \\| &lt;color&gt;</code> Define a metro line with ID, display name, and hex color <code>%%metro grid: &lt;section&gt; \\| &lt;col&gt;,&lt;row&gt;[,&lt;rowspan&gt;[,&lt;colspan&gt;]]</code> Pin a section to a grid position <code>%%metro legend: &lt;position&gt;</code> Legend position: <code>tl</code>, <code>tr</code>, <code>bl</code>, <code>br</code>, <code>bottom</code>, <code>right</code>, or <code>none</code> <code>%%metro file: &lt;station&gt; \\| &lt;label&gt;</code> Mark a station as a file terminus with a document icon"},{"location":"guide/#section-directives","title":"Section directives","text":"<p>These go inside <code>subgraph</code> blocks.</p> Directive Description <code>%%metro entry: &lt;side&gt; \\| &lt;lines&gt;</code> Entry port hint. Sides: <code>left</code>, <code>right</code>, <code>top</code>, <code>bottom</code> <code>%%metro exit: &lt;side&gt; \\| &lt;lines&gt;</code> Exit port hint. Sides: <code>left</code>, <code>right</code>, <code>top</code>, <code>bottom</code> <code>%%metro direction: &lt;dir&gt;</code> Internal flow direction: <code>LR</code>, <code>RL</code>, or <code>TB</code> <p>Entry/exit hints tell the layout engine which side of the section box lines should enter or leave from. Most of the time you can omit these entirely and let the auto-layout engine figure it out. They are useful when you want lines to exit from different sides of the same section (e.g., right for some lines, bottom for others).</p>"},{"location":"guide/#tips","title":"Tips","text":"<ul> <li>Start without sections. Get your stations and line routing right first, then wrap groups in <code>subgraph</code> blocks.</li> <li>Omit entry/exit hints. The auto-layout engine infers them correctly in most cases. Only add hints when you need multi-side exits or want to override the default.</li> <li>Use <code>--debug</code> to see ports, hidden stations, and edge waypoints: <code>nf-metro render --debug pipeline.mmd -o debug.svg</code></li> <li>Use <code>nf-metro validate</code> to catch errors before rendering.</li> <li>Use <code>nf-metro info</code> to inspect the parsed structure (sections, lines, stations, edges).</li> </ul>"},{"location":"nextflow/","title":"Importing from Nextflow","text":"<p>nf-metro can convert Nextflow's built-in DAG output into a metro map. This works best for simple pipelines with a handful of subworkflows. For complex pipelines like those in nf-core, direct conversion is unlikely to produce a good diagram -- you will need to hand-write or heavily edit the <code>.mmd</code> file. Improving this is an active area of development.</p>"},{"location":"nextflow/#generating-a-nextflow-dag","title":"Generating a Nextflow DAG","text":"<p>Nextflow can export its pipeline DAG in mermaid format:</p> <pre><code>nextflow run my_pipeline.nf -preview -with-dag dag.mmd\n</code></pre> <p>The <code>-preview</code> flag skips execution and just generates the DAG. The resulting file uses Nextflow's <code>flowchart TB</code> mermaid syntax, which nf-metro cannot render directly but can convert.</p>"},{"location":"nextflow/#direct-rendering","title":"Direct rendering","text":"<p>The quickest way to get a metro map is to convert and render in one step with the <code>--from-nextflow</code> flag. The following examples show what you get straight out of the box.</p>"},{"location":"nextflow/#flat-pipeline-no-subworkflows","title":"Flat pipeline (no subworkflows)","text":"<p>A simple five-process pipeline with no subworkflows:</p> <pre><code>workflow {\n    reads_ch = Channel.of([\"sample1\", [file(\"reads/s1_1.fq.gz\"), file(\"reads/s1_2.fq.gz\")]])\n    reference_ch = Channel.of(file(\"genome.fa\"))\n\n    FASTQC(reads_ch)\n    TRIM_READS(reads_ch)\n    ALIGN(TRIM_READS.out, reference_ch.collect())\n    SORT_BAM(ALIGN.out)\n    MULTIQC(FASTQC.out.zip.mix(SORT_BAM.out.map { it[1] }).collect())\n}\n</code></pre> <pre><code>nextflow run flat_pipeline.nf -preview -with-dag dag.mmd\nnf-metro render dag.mmd -o pipeline.svg --from-nextflow\n</code></pre> <p></p> <p>With no subworkflows everything lands in a single section. The converter assigns one \"main\" line following the longest path. This is about as clean as it gets.</p>"},{"location":"nextflow/#pipeline-with-subworkflows","title":"Pipeline with subworkflows","text":"<p>A pipeline with three subworkflows (Preprocess, Alignment, Quantification) plus a standalone MultiQC process:</p> <pre><code>workflow PREPROCESS {\n    take: reads\n    main:\n    FASTQC(reads)\n    TRIMGALORE(reads)\n    emit:\n    reads = TRIMGALORE.out.reads\n    fastqc_zip = FASTQC.out.zip\n    trim_log = TRIMGALORE.out.log\n}\n\nworkflow ALIGNMENT {\n    take: reads; genome; gtf\n    main:\n    STAR_GENOMEGENERATE(genome, gtf)\n    STAR_ALIGN(reads, STAR_GENOMEGENERATE.out.index.collect())\n    SAMTOOLS_SORT(STAR_ALIGN.out.bam)\n    SAMTOOLS_INDEX(SAMTOOLS_SORT.out.bam)\n    emit:\n    bam = SAMTOOLS_SORT.out.bam\n    star_log = STAR_ALIGN.out.log\n}\n\nworkflow QUANTIFICATION {\n    take: bam; gtf\n    main:\n    SALMON_QUANT(bam, gtf)\n    emit:\n    results = SALMON_QUANT.out.results\n}\n\nworkflow {\n    PREPROCESS(reads_ch)\n    ALIGNMENT(PREPROCESS.out.reads, genome_ch, gtf_ch)\n    QUANTIFICATION(ALIGNMENT.out.bam, gtf_ch)\n    MULTIQC(/* all logs */)\n}\n</code></pre> <pre><code>nextflow run with_subworkflows.nf -preview -with-dag dag.mmd\nnf-metro render dag.mmd -o pipeline.svg --from-nextflow\n</code></pre> <p></p> <p>The converter maps each subworkflow to a section and auto-creates a \"Reporting\" section for the standalone MultiQC. It detects bypass lines (edges skipping sections, like QC metrics going from Preprocess directly to Reporting) and spur lines (dead-end processes like Samtools Index).</p>"},{"location":"nextflow/#variant-calling-pipeline-diamond-pattern","title":"Variant calling pipeline (diamond pattern)","text":"<p>A pipeline where two variant callers (GATK and DeepVariant) both receive input from the same alignment step and reconverge at BCFtools Stats:</p> <pre><code>workflow VARIANT_CALLING {\n    take: bam; bai; genome\n    main:\n    bam_bai = bam.join(bai)\n    GATK_HAPLOTYPECALLER(bam_bai, genome.collect())\n    DEEPVARIANT(bam_bai, genome.collect())\n    BCFTOOLS_STATS(GATK_HAPLOTYPECALLER.out.vcf.mix(DEEPVARIANT.out.vcf))\n    emit:\n    stats = BCFTOOLS_STATS.out.stats\n}\n\nworkflow {\n    PREPROCESS(reads_ch)\n    ALIGNMENT(PREPROCESS.out.reads, genome_ch)\n    VARIANT_CALLING(ALIGNMENT.out.bam, ALIGNMENT.out.bai, genome_ch)\n    MULTIQC(/* all logs */)\n}\n</code></pre> <pre><code>nextflow run variant_calling.nf -preview -with-dag dag.mmd\nnf-metro render dag.mmd -o pipeline.svg --from-nextflow\n</code></pre> <p></p> <p>The diamond fan-out/fan-in in the Variant Calling section renders cleanly.</p>"},{"location":"nextflow/#hand-tuning-the-output","title":"Hand-tuning the output","text":"<p>For anything beyond a toy pipeline, the two-step workflow gives better results. Convert first, edit the <code>.mmd</code>, then render:</p> <pre><code>nf-metro convert dag.mmd -o pipeline.mmd --title \"My Pipeline\"\n# edit pipeline.mmd\nnf-metro render pipeline.mmd -o pipeline.svg\n</code></pre> <p>Here is what the converter produces for the variant calling pipeline:</p> <pre><code>%%metro title: Preprocess / Alignment / Variant Calling Pipeline\n%%metro style: dark\n%%metro line: main | Main | #2db572\n%%metro line: preprocess_reporting | Preprocess - Reporting | #0570b0\n\ngraph LR\n    subgraph preprocess [Preprocess]\n        fastqc([Fastqc])\n        fastp([Fastp])\n    end\n\n    subgraph alignment [Alignment]\n        bwa_index([Bwa Index])\n        bwa_mem([Bwa Mem])\n        samtools_sort([Samtools Sort])\n        samtools_index([Samtools Index])\n\n        bwa_index --&gt;|main| bwa_mem\n        bwa_mem --&gt;|main| samtools_sort\n        samtools_sort --&gt;|main| samtools_index\n    end\n\n    subgraph variant_calling [Variant Calling]\n        gatk_haplotypecaller([Gatk Haplotypeca])\n        deepvariant([Deepvariant])\n        bcftools_stats([Bcftools Stats])\n\n        gatk_haplotypecaller --&gt;|main| bcftools_stats\n        deepvariant --&gt;|main| bcftools_stats\n    end\n\n    subgraph reporting [Reporting]\n        multiqc([Multiqc])\n    end\n\n    %% Inter-section edges\n    bcftools_stats --&gt;|main| multiqc\n    fastp --&gt;|main| bwa_mem\n    samtools_sort --&gt;|main| gatk_haplotypecaller\n    samtools_sort --&gt;|main| deepvariant\n    samtools_index --&gt;|main| gatk_haplotypecaller\n    samtools_index --&gt;|main| deepvariant\n    fastqc --&gt;|preprocess_reporting| multiqc\n    fastp --&gt;|preprocess_reporting| multiqc\n</code></pre> <p>After editing -- cleaning up labels, renaming the bypass line, and adding a proper title -- the <code>.mmd</code> becomes:</p> <pre><code>%%metro title: Variant Calling Pipeline\n%%metro style: dark\n%%metro line: main | Main | #2db572\n%%metro line: qc | QC Reporting | #0570b0\n\ngraph LR\n    subgraph preprocess [Pre-processing]\n        fastqc[FastQC]\n        fastp[FastP]\n    end\n\n    subgraph alignment [Alignment]\n        bwa_index[BWA Index]\n        bwa_mem[BWA-MEM]\n        samtools_sort[SAMtools Sort]\n        samtools_index[SAMtools Index]\n\n        bwa_index --&gt;|main| bwa_mem\n        bwa_mem --&gt;|main| samtools_sort\n        samtools_sort --&gt;|main| samtools_index\n    end\n\n    subgraph variant_calling [Variant Calling]\n        gatk[GATK HaplotypeCaller]\n        deepvariant[DeepVariant]\n        bcftools[BCFtools Stats]\n\n        gatk --&gt;|main| bcftools\n        deepvariant --&gt;|main| bcftools\n    end\n\n    subgraph reporting [Reporting]\n        multiqc[MultiQC]\n    end\n\n    %% Inter-section edges\n    fastp --&gt;|main| bwa_mem\n    samtools_sort --&gt;|main| gatk\n    samtools_sort --&gt;|main| deepvariant\n    samtools_index --&gt;|main| gatk\n    samtools_index --&gt;|main| deepvariant\n    bcftools --&gt;|main| multiqc\n    fastqc --&gt;|qc| multiqc\n    fastp --&gt;|qc| multiqc\n</code></pre> <p></p> <p>The changes are small but the diagram reads better: proper casing on labels (BWA-MEM, SAMtools, GATK HaplotypeCaller), a meaningful line name (\"QC Reporting\" instead of \"Preprocess - Reporting\"), and a cleaner title. See the Guide for the full <code>.mmd</code> format reference.</p>"},{"location":"nextflow/#how-the-converter-works","title":"How the converter works","text":"<p>Nextflow's <code>-with-dag</code> output contains three types of nodes: processes (the actual pipeline steps), channels/values (data plumbing), and operators (Nextflow internals like <code>mix</code> and <code>collect</code>). Here is the raw DAG for the flat pipeline example:</p> <pre><code>flowchart TB\n    subgraph \" \"\n    v0[\"Channel.of\"]\n    v1[\"Channel.of\"]\n    end\n    v2([\"FASTQC\"])\n    v4([\"TRIM_READS\"])\n    v6([\"ALIGN\"])\n    v7([\"SORT_BAM\"])\n    v11([\"MULTIQC\"])\n    v5(( ))\n    v8(( ))\n    v0 --&gt; v2\n    v0 --&gt; v4\n    v1 --&gt; v5\n    v4 --&gt; v6\n    v5 --&gt; v6\n    v6 --&gt; v7\n    v7 --&gt; v8\n    v2 --&gt; v8\n    v8 --&gt; v11\n</code></pre> <p>The converter:</p> <ol> <li> <p>Drops non-process nodes -- channel nodes (<code>v0[\"Channel.of\"]</code>), value nodes (<code>v1[\"Channel.of\"]</code>), and operator nodes (<code>v5(( ))</code>, <code>v8(( ))</code>) are removed. Only stadium-shaped process nodes like <code>v2([\"FASTQC\"])</code> are kept.</p> </li> <li> <p>Reconnects edges -- edges that went through dropped nodes are stitched back together. For example, <code>SORT_BAM --&gt; v8 --&gt; MULTIQC</code> becomes <code>SORT_BAM --&gt; MULTIQC</code>, and <code>FASTQC --&gt; v8 --&gt; MULTIQC</code> becomes <code>FASTQC --&gt; MULTIQC</code>.</p> </li> <li> <p>Maps subworkflows to sections -- Nextflow subworkflows become nf-metro <code>subgraph</code> sections. Processes not in any subworkflow are grouped into auto-generated sections.</p> </li> <li> <p>Assigns metro lines -- the longest path gets the \"main\" line. Edges that skip sections get their own bypass lines. Dead-end processes get spur lines.</p> </li> <li> <p>Cleans up labels -- <code>SCREAMING_SNAKE_CASE</code> becomes <code>Title Case</code>, and long names are abbreviated.</p> </li> </ol> <p>The result for this example:</p> <pre><code>%%metro title: Pipeline\n%%metro style: dark\n%%metro line: main | Main | #2db572\n\ngraph LR\n    subgraph pipeline [Pipeline]\n        fastqc([Fastqc])\n        trim_reads([Trim Reads])\n        align([Align])\n        sort_bam([Sort Bam])\n        multiqc([Multiqc])\n\n        fastqc --&gt;|main| multiqc\n        trim_reads --&gt;|main| align\n        align --&gt;|main| sort_bam\n        sort_bam --&gt;|main| multiqc\n    end\n</code></pre>"},{"location":"gallery/","title":"Gallery","text":"<p>Rendered examples covering a range of layout patterns. Click any heading in the right-hand table of contents to jump to an example.</p>"},{"location":"gallery/#main-examples","title":"Main Examples","text":""},{"location":"gallery/#simple-pipeline","title":"Simple Pipeline","text":"<p>Minimal two-line pipeline with no sections.</p> <p>CLI command:</p> <pre><code>nf-metro render examples/simple_pipeline.mmd -o simple_pipeline.svg\n</code></pre> Mermaid source <pre><code>%%metro title: Simple Pipeline\n%%metro style: dark\n%%metro line: main | Main | #4CAF50\n%%metro line: qc | Quality Control | #2196F3\n\ngraph LR\n    input[Input]\n    fastqc[FastQC]\n    trim[Trimming]\n    align[Alignment]\n    quant[Quantification]\n    multiqc[MultiQC]\n\n    input --&gt;|main| trim\n    trim --&gt;|main| align\n    align --&gt;|main| quant\n    input --&gt;|qc| fastqc\n    trim --&gt;|qc| fastqc\n    quant --&gt;|qc| multiqc\n    fastqc --&gt;|qc| multiqc\n</code></pre> <p>Rendered output:</p> <p></p>"},{"location":"gallery/#rnaseq-auto","title":"Rnaseq Auto","text":"<p>nf-core/rnaseq with fully auto-inferred layout.</p> <p>CLI command:</p> <pre><code>nf-metro render examples/rnaseq_auto.mmd -o rnaseq_auto.svg\n</code></pre> Mermaid source <pre><code>%%metro title: nf-core/rnaseq\n%%metro logo: examples/nf-core-rnaseq_logo_dark.png\n%%metro style: dark\n%%metro line: star_rsem | Aligner: STAR, Quantification: RSEM | #0570b0\n%%metro line: star_salmon | Aligner: STAR, Quantification: Salmon (default) | #2db572\n%%metro line: hisat2 | Aligner: HISAT2, Quantification: None | #f5c542\n%%metro line: pseudo_salmon | Pseudo-aligner: Salmon, Quantification: Salmon | #e63946\n%%metro line: pseudo_kallisto | Pseudo-aligner: Kallisto, Quantification: Kallisto | #7b2d3b\n%%metro legend: bl\n\ngraph LR\n    subgraph preprocessing [Pre-processing]\n        cat_fastq[cat fastq]\n        fastqc_raw[FastQC]\n        infer_strandedness[infer strandedness]\n        umi_tools_extract[UMI-tools extract]\n        fastp[FastP]\n        trimgalore[Trim Galore!]\n        fastqc_trimmed[FastQC]\n        bbsplit[BBSplit]\n        sortmerna[SortMeRNA]\n\n        cat_fastq --&gt;|star_salmon,star_rsem,hisat2,pseudo_salmon,pseudo_kallisto| fastqc_raw\n        fastqc_raw --&gt;|star_salmon,star_rsem,hisat2,pseudo_salmon,pseudo_kallisto| infer_strandedness\n        infer_strandedness --&gt;|star_salmon,star_rsem,hisat2,pseudo_salmon,pseudo_kallisto| umi_tools_extract\n\n        umi_tools_extract --&gt;|star_salmon,star_rsem,hisat2,pseudo_salmon,pseudo_kallisto| fastp\n        umi_tools_extract --&gt;|star_salmon,star_rsem,hisat2,pseudo_salmon,pseudo_kallisto| trimgalore\n        fastp --&gt;|star_salmon,star_rsem,hisat2,pseudo_salmon,pseudo_kallisto| fastqc_trimmed\n        trimgalore --&gt;|star_salmon,star_rsem,hisat2,pseudo_salmon,pseudo_kallisto| fastqc_trimmed\n\n        fastqc_trimmed --&gt;|star_salmon,star_rsem,hisat2,pseudo_salmon,pseudo_kallisto| bbsplit\n        bbsplit --&gt;|star_salmon,star_rsem,hisat2,pseudo_salmon,pseudo_kallisto| sortmerna\n    end\n\n    subgraph genome_align [Genome alignment &amp; quantification]\n        star[STAR]\n        hisat2_align[HISAT2]\n        rsem[RSEM]\n        salmon_quant[Salmon]\n        umi_tools_dedup[UMI-tools dedup]\n\n        star --&gt;|star_rsem| rsem\n        star --&gt;|star_salmon| umi_tools_dedup\n        umi_tools_dedup --&gt;|star_salmon| salmon_quant\n        hisat2_align --&gt;|hisat2| umi_tools_dedup\n    end\n\n    subgraph postprocessing [Post-processing]\n        samtools[SAMtools]\n        picard[Picard]\n        bedtools[BEDTools]\n        bedgraph[bedGraphToBigWig]\n        stringtie[StringTie]\n\n        samtools --&gt;|star_salmon,star_rsem,hisat2| picard\n        picard --&gt;|star_salmon,star_rsem,hisat2| bedtools\n        bedtools --&gt;|star_salmon,star_rsem,hisat2| bedgraph\n        bedgraph --&gt;|star_salmon,star_rsem,hisat2| stringtie\n    end\n\n    subgraph pseudo_align [Pseudo-alignment &amp; quantification]\n        salmon_pseudo[Salmon]\n        kallisto[Kallisto]\n        multiqc_pseudo[MultiQC]\n\n        salmon_pseudo --&gt;|pseudo_salmon| multiqc_pseudo\n        kallisto --&gt;|pseudo_kallisto| multiqc_pseudo\n    end\n\n    subgraph qc_report [Quality control &amp; reporting]\n        rseqc[RSeQC]\n        preseq[Preseq]\n        qualimap[Qualimap]\n        dupradar[dupRadar]\n        deseq2_pca[DESeq2 PCA]\n        kraken2[Kraken2/Bracken]\n        multiqc_final[MultiQC]\n\n        rseqc --&gt;|star_salmon,star_rsem,hisat2| preseq\n        preseq --&gt;|star_salmon,star_rsem,hisat2| qualimap\n        qualimap --&gt;|star_salmon,star_rsem,hisat2| dupradar\n        dupradar --&gt;|star_salmon,star_rsem,hisat2| deseq2_pca\n        deseq2_pca --&gt;|star_salmon,star_rsem,hisat2| kraken2\n        kraken2 --&gt;|star_salmon,star_rsem,hisat2| multiqc_final\n    end\n\n    %% Inter-section edges\n    sortmerna --&gt;|star_salmon,star_rsem| star\n    sortmerna --&gt;|hisat2| hisat2_align\n    sortmerna --&gt;|pseudo_salmon| salmon_pseudo\n    sortmerna --&gt;|pseudo_kallisto| kallisto\n    salmon_quant --&gt;|star_salmon| samtools\n    rsem --&gt;|star_rsem| samtools\n    umi_tools_dedup --&gt;|hisat2| samtools\n    stringtie --&gt;|star_salmon,star_rsem,hisat2| rseqc\n</code></pre> <p>Rendered output:</p> <p></p>"},{"location":"gallery/#rnaseq-sections","title":"Rnaseq Sections","text":"<p>nf-core/rnaseq with manual grid overrides and file markers.</p> <p>CLI command:</p> <pre><code>nf-metro render examples/rnaseq_sections.mmd -o rnaseq_sections.svg\n</code></pre> Mermaid source <pre><code>%%metro title: nf-core/rnaseq\n%%metro logo: examples/nf-core-rnaseq_logo_dark.png\n%%metro style: dark\n%%metro file: fastq_in | FASTQ\n%%metro file: report_final | HTML\n%%metro file: report_quant | HTML\n%%metro file: report_bowtie2 | HTML\n%%metro line: star_rsem | Aligner: STAR, Quantification: RSEM | #0570b0\n%%metro line: star_salmon | Aligner: STAR, Quantification: Salmon (default) | #2db572\n%%metro line: hisat2 | Aligner: HISAT2, Quantification: None | #f5c542\n%%metro line: bowtie2_salmon | Aligner: Bowtie2, Quantification: Salmon | #ff8c00\n%%metro line: pseudo_salmon | Pseudo-aligner: Salmon, Quantification: Salmon | #e63946\n%%metro line: pseudo_kallisto | Pseudo-aligner: Kallisto, Quantification: Kallisto | #7b2d3b\n%%metro legend: bl\n\ngraph LR\n    subgraph preprocessing [Pre-processing]\n        %%metro exit: right | star_salmon, star_rsem, hisat2, bowtie2_salmon\n        %%metro exit: bottom | pseudo_salmon, pseudo_kallisto\n        fastq_in[ ]\n        cat_fastq[cat fastq]\n        fastqc_raw[FastQC]\n        infer_strandedness[infer strandedness]\n        umi_tools_extract[UMI-tools extract]\n        fastp[FastP]\n        trimgalore[Trim Galore!]\n        fastqc_trimmed[FastQC]\n        bbsplit[BBSplit]\n        sortmerna[SortMeRNA]\n        ribodetector[RiboDetector]\n        fastqc_filtered[FastQC]\n\n        fastq_in --&gt;|pseudo_salmon,pseudo_kallisto,star_salmon,star_rsem,hisat2,bowtie2_salmon| cat_fastq\n        cat_fastq --&gt;|pseudo_salmon,pseudo_kallisto,star_salmon,star_rsem,hisat2,bowtie2_salmon| fastqc_raw\n        fastqc_raw --&gt;|pseudo_salmon,pseudo_kallisto,star_salmon,star_rsem,hisat2,bowtie2_salmon| infer_strandedness\n        infer_strandedness --&gt;|pseudo_salmon,pseudo_kallisto,star_salmon,star_rsem,hisat2,bowtie2_salmon| umi_tools_extract\n\n        umi_tools_extract --&gt;|pseudo_salmon,pseudo_kallisto,star_salmon,star_rsem,hisat2,bowtie2_salmon| fastp\n        umi_tools_extract --&gt;|pseudo_salmon,pseudo_kallisto,star_salmon,star_rsem,hisat2,bowtie2_salmon| trimgalore\n        fastp --&gt;|pseudo_salmon,pseudo_kallisto,star_salmon,star_rsem,hisat2,bowtie2_salmon| fastqc_trimmed\n        trimgalore --&gt;|pseudo_salmon,pseudo_kallisto,star_salmon,star_rsem,hisat2,bowtie2_salmon| fastqc_trimmed\n\n        fastqc_trimmed --&gt;|pseudo_salmon,pseudo_kallisto,star_salmon,star_rsem,hisat2,bowtie2_salmon| bbsplit\n        fastqc_trimmed --&gt;|pseudo_salmon,pseudo_kallisto,star_salmon,star_rsem,hisat2,bowtie2_salmon| sortmerna\n        fastqc_trimmed --&gt;|pseudo_salmon,pseudo_kallisto,star_salmon,star_rsem,hisat2,bowtie2_salmon| ribodetector\n        bbsplit --&gt;|pseudo_salmon,pseudo_kallisto,star_salmon,star_rsem,hisat2,bowtie2_salmon| fastqc_filtered\n        sortmerna --&gt;|pseudo_salmon,pseudo_kallisto,star_salmon,star_rsem,hisat2,bowtie2_salmon| fastqc_filtered\n        ribodetector --&gt;|pseudo_salmon,pseudo_kallisto,star_salmon,star_rsem,hisat2,bowtie2_salmon| fastqc_filtered\n    end\n\n    subgraph genome_align [Genome alignment &amp; quantification]\n        %%metro entry: left | star_salmon, star_rsem, hisat2, bowtie2_salmon\n        %%metro exit: right | star_salmon, star_rsem\n        %%metro exit: right | hisat2\n        star[STAR]\n        hisat2_align[HISAT2]\n        bowtie2_align[Bowtie2]\n        rsem[RSEM]\n        salmon_quant[Salmon]\n        umi_tools_dedup[UMI-tools dedup]\n        tximport_ga[tximport]\n        summarized_exp_ga[Sum. Exp.]\n        multiqc_bowtie2[MultiQC]\n        report_bowtie2[ ]\n        _h1[hidden]\n        _h2[hidden]\n        _h3[hidden]\n\n        star --&gt;|star_rsem| rsem\n        star --&gt;|star_salmon| umi_tools_dedup\n        hisat2_align --&gt;|hisat2| umi_tools_dedup\n        bowtie2_align --&gt;|bowtie2_salmon| umi_tools_dedup\n        umi_tools_dedup --&gt;|star_salmon| salmon_quant\n        umi_tools_dedup --&gt;|hisat2| _h1\n        _h1 --&gt;|hisat2| _h2\n        _h2 --&gt;|hisat2| _h3\n        salmon_quant --&gt;|star_salmon| tximport_ga\n        rsem --&gt;|star_rsem| tximport_ga\n        tximport_ga --&gt;|star_salmon,star_rsem| summarized_exp_ga\n        umi_tools_dedup --&gt;|bowtie2_salmon| salmon_quant\n        salmon_quant --&gt;|bowtie2_salmon| multiqc_bowtie2\n        multiqc_bowtie2 --&gt;|bowtie2_salmon| report_bowtie2\n    end\n\n    subgraph pseudo_align [Pseudo-alignment &amp; quantification]\n        %%metro entry: left | pseudo_salmon, pseudo_kallisto\n        salmon_pseudo[Salmon]\n        kallisto[Kallisto]\n        tximport_pa[tximport]\n        summarized_exp_pa[Sum. Exp.]\n        multiqc_quant[MultiQC]\n        report_quant[ ]\n\n        salmon_pseudo --&gt;|pseudo_salmon| tximport_pa\n        kallisto --&gt;|pseudo_kallisto| tximport_pa\n        tximport_pa --&gt;|pseudo_salmon,pseudo_kallisto| summarized_exp_pa\n        summarized_exp_pa --&gt;|pseudo_salmon,pseudo_kallisto| multiqc_quant\n        multiqc_quant --&gt;|pseudo_salmon,pseudo_kallisto| report_quant\n    end\n\n    subgraph postprocessing [Post-processing]\n        %%metro direction: TB\n        %%metro entry: left | star_salmon, star_rsem, hisat2\n        %%metro exit: bottom | star_salmon, star_rsem, hisat2\n        samtools[SAMtools]\n        picard[Picard]\n        bedtools[BEDTools]\n        bedgraph[bedGraphToBigWig]\n        stringtie[StringTie]\n\n        samtools --&gt;|star_salmon,star_rsem,hisat2| picard\n        picard --&gt;|star_salmon,star_rsem,hisat2| bedtools\n        bedtools --&gt;|star_salmon,star_rsem,hisat2| bedgraph\n        bedgraph --&gt;|star_salmon,star_rsem,hisat2| stringtie\n    end\n\n    subgraph qc_report [Quality control &amp; reporting]\n        %%metro direction: RL\n        %%metro entry: top | star_salmon, star_rsem, hisat2\n        rseqc[RSeQC]\n        preseq[Preseq]\n        qualimap[Qualimap]\n        dupradar[dupRadar]\n        featurecounts[featureCounts]\n        deseq2_pca[DESeq2 PCA]\n        kraken2[Kraken2/Bracken]\n        sylph[Sylph]\n        multiqc_final[MultiQC]\n        report_final[ ]\n\n        rseqc --&gt;|star_salmon,star_rsem,hisat2| preseq\n        preseq --&gt;|star_salmon,star_rsem,hisat2| qualimap\n        qualimap --&gt;|star_salmon,star_rsem,hisat2| dupradar\n        dupradar --&gt;|star_salmon,star_rsem,hisat2| featurecounts\n        featurecounts --&gt;|star_salmon,star_rsem,hisat2| deseq2_pca\n        deseq2_pca --&gt;|star_salmon,star_rsem,hisat2| kraken2\n        deseq2_pca --&gt;|star_salmon,star_rsem,hisat2| sylph\n        kraken2 --&gt;|star_salmon,star_rsem,hisat2| multiqc_final\n        sylph --&gt;|star_salmon,star_rsem,hisat2| multiqc_final\n        multiqc_final --&gt;|star_salmon,star_rsem,hisat2| report_final\n    end\n\n    %% Inter-section edges\n    fastqc_filtered --&gt;|star_salmon,star_rsem| star\n    fastqc_filtered --&gt;|hisat2| hisat2_align\n    fastqc_filtered --&gt;|bowtie2_salmon| bowtie2_align\n    fastqc_filtered --&gt;|pseudo_salmon| salmon_pseudo\n    fastqc_filtered --&gt;|pseudo_kallisto| kallisto\n    summarized_exp_ga --&gt;|star_salmon,star_rsem| samtools\n    _h3 --&gt;|hisat2| samtools\n    stringtie --&gt;|star_salmon,star_rsem,hisat2| rseqc\n</code></pre> <p>Rendered output:</p> <p></p>"},{"location":"gallery/#simple-topologies","title":"Simple Topologies","text":""},{"location":"gallery/#single-section","title":"Single Section","text":"<p>One section, one line. The simplest possible case.</p> <p>CLI command:</p> <pre><code>nf-metro render examples/topologies/single_section.mmd -o single_section.svg\n</code></pre> Mermaid source <pre><code>%%metro title: Single Section\n%%metro style: dark\n%%metro line: main | Main | #e63946\n\ngraph LR\n    subgraph only [Only Section]\n        a[Input]\n        b[Process]\n        c[Output]\n        a --&gt;|main| b\n        b --&gt;|main| c\n    end\n</code></pre> <p>Rendered output:</p> <p></p>"},{"location":"gallery/#deep-linear","title":"Deep Linear","text":"<p>Seven sections in a straight chain. Exercises the grid fold threshold.</p> <p>CLI command:</p> <pre><code>nf-metro render examples/topologies/deep_linear.mmd -o deep_linear.svg\n</code></pre> Mermaid source <pre><code>%%metro title: Deep Linear Chain\n%%metro style: dark\n%%metro line: main | Main | #e63946\n%%metro line: alt | Alternative | #2db572\n\ngraph LR\n    subgraph sec1 [Input]\n        s1a[Read]\n        s1b[Validate]\n        s1a --&gt;|main,alt| s1b\n    end\n\n    subgraph sec2 [QC]\n        s2a[FastQC]\n        s2b[MultiQC]\n        s2a --&gt;|main,alt| s2b\n    end\n\n    subgraph sec3 [Trim]\n        s3a[Trim]\n        s3b[Filter]\n        s3c[Check]\n        s3a --&gt;|main| s3b\n        s3a --&gt;|alt| s3b\n        s3b --&gt;|main,alt| s3c\n    end\n\n    subgraph sec4 [Align]\n        s4a[Index]\n        s4b[Map]\n        s4c[Sort]\n        s4a --&gt;|main,alt| s4b\n        s4b --&gt;|main,alt| s4c\n    end\n\n    subgraph sec5 [Quant]\n        s5a[Count]\n        s5b[Normalize]\n        s5a --&gt;|main,alt| s5b\n    end\n\n    subgraph sec6 [Analysis]\n        s6a[Diff Expr]\n        s6b[Pathway]\n        s6c[Annotate]\n        s6a --&gt;|main,alt| s6b\n        s6b --&gt;|main,alt| s6c\n    end\n\n    subgraph sec7 [Report]\n        s7a[Aggregate]\n        s7b[Report]\n        s7a --&gt;|main,alt| s7b\n    end\n\n    s1b --&gt;|main,alt| s2a\n    s2b --&gt;|main,alt| s3a\n    s3c --&gt;|main,alt| s4a\n    s4c --&gt;|main,alt| s5a\n    s5b --&gt;|main,alt| s6a\n    s6c --&gt;|main,alt| s7a\n</code></pre> <p>Rendered output:</p> <p></p>"},{"location":"gallery/#parallel-independent","title":"Parallel Independent","text":"<p>Two disconnected pipelines stacked vertically.</p> <p>CLI command:</p> <pre><code>nf-metro render examples/topologies/parallel_independent.mmd -o parallel_independent.svg\n</code></pre> Mermaid source <pre><code>%%metro title: Parallel Independent\n%%metro style: dark\n%%metro line: dna | DNA Pipeline | #e63946\n%%metro line: rna | RNA Pipeline | #0570b0\n\ngraph LR\n    subgraph dna_input [DNA Input]\n        di1[Read DNA]\n        di2[QC DNA]\n        di1 --&gt;|dna| di2\n    end\n\n    subgraph dna_process [DNA Process]\n        dp1[Align DNA]\n        dp2[Call Variants]\n        dp1 --&gt;|dna| dp2\n    end\n\n    subgraph rna_input [RNA Input]\n        ri1[Read RNA]\n        ri2[QC RNA]\n        ri1 --&gt;|rna| ri2\n    end\n\n    subgraph rna_process [RNA Process]\n        rp1[Align RNA]\n        rp2[Quantify]\n        rp1 --&gt;|rna| rp2\n    end\n\n    di2 --&gt;|dna| dp1\n    ri2 --&gt;|rna| rp1\n</code></pre> <p>Rendered output:</p> <p></p>"},{"location":"gallery/#fan-out-and-fan-in","title":"Fan-out and Fan-in","text":""},{"location":"gallery/#wide-fan-out","title":"Wide Fan Out","text":"<p>One source fanning out to four target sections.</p> <p>CLI command:</p> <pre><code>nf-metro render examples/topologies/wide_fan_out.mmd -o wide_fan_out.svg\n</code></pre> Mermaid source <pre><code>%%metro title: Wide Fan-Out\n%%metro style: dark\n%%metro line: alpha | Alpha | #e63946\n%%metro line: beta | Beta | #2db572\n%%metro line: gamma | Gamma | #0570b0\n%%metro line: delta | Delta | #f5c542\n\ngraph LR\n    subgraph source [Source]\n        input[Input]\n        process[Process]\n        input --&gt;|alpha,beta,gamma,delta| process\n    end\n\n    subgraph target_a [Target A]\n        a1[Step A1]\n        a2[Step A2]\n        a1 --&gt;|alpha| a2\n    end\n\n    subgraph target_b [Target B]\n        b1[Step B1]\n        b2[Step B2]\n        b1 --&gt;|beta| b2\n    end\n\n    subgraph target_c [Target C]\n        c1[Step C1]\n        c2[Step C2]\n        c1 --&gt;|gamma| c2\n    end\n\n    subgraph target_d [Target D]\n        d1[Step D1]\n        d2[Step D2]\n        d1 --&gt;|delta| d2\n    end\n\n    process --&gt;|alpha| a1\n    process --&gt;|beta| b1\n    process --&gt;|gamma| c1\n    process --&gt;|delta| d1\n</code></pre> <p>Rendered output:</p> <p></p>"},{"location":"gallery/#wide-fan-in","title":"Wide Fan In","text":"<p>Four sources converging into one target section.</p> <p>CLI command:</p> <pre><code>nf-metro render examples/topologies/wide_fan_in.mmd -o wide_fan_in.svg\n</code></pre> Mermaid source <pre><code>%%metro title: Wide Fan-In\n%%metro style: dark\n%%metro line: alpha | Alpha | #e63946\n%%metro line: beta | Beta | #2db572\n%%metro line: gamma | Gamma | #0570b0\n%%metro line: delta | Delta | #f5c542\n\ngraph LR\n    subgraph src_a [Source A]\n        a1[Step A1]\n        a2[Step A2]\n        a1 --&gt;|alpha| a2\n    end\n\n    subgraph src_b [Source B]\n        b1[Step B1]\n        b2[Step B2]\n        b1 --&gt;|beta| b2\n    end\n\n    subgraph src_c [Source C]\n        c1[Step C1]\n        c2[Step C2]\n        c1 --&gt;|gamma| c2\n    end\n\n    subgraph src_d [Source D]\n        d1[Step D1]\n        d2[Step D2]\n        d1 --&gt;|delta| d2\n    end\n\n    subgraph sink [Sink]\n        merge[Merge]\n        output[Output]\n        merge --&gt;|alpha,beta,gamma,delta| output\n    end\n\n    a2 --&gt;|alpha| merge\n    b2 --&gt;|beta| merge\n    c2 --&gt;|gamma| merge\n    d2 --&gt;|delta| merge\n</code></pre> <p>Rendered output:</p> <p></p>"},{"location":"gallery/#section-diamond","title":"Section Diamond","text":"<p>Section-level fork-join: fan-out then reconverge.</p> <p>CLI command:</p> <pre><code>nf-metro render examples/topologies/section_diamond.mmd -o section_diamond.svg\n</code></pre> Mermaid source <pre><code>%%metro title: Section Diamond\n%%metro style: dark\n%%metro line: left_path | Left Path | #e63946\n%%metro line: right_path | Right Path | #0570b0\n\ngraph LR\n    subgraph start [Start]\n        input[Input]\n        prep[Prepare]\n        input --&gt;|left_path,right_path| prep\n    end\n\n    subgraph branch_left [Branch Left]\n        l1[Left Step 1]\n        l2[Left Step 2]\n        l3[Left Step 3]\n        l1 --&gt;|left_path| l2\n        l2 --&gt;|left_path| l3\n    end\n\n    subgraph branch_right [Branch Right]\n        r1[Right Step 1]\n        r2[Right Step 2]\n        r1 --&gt;|right_path| r2\n    end\n\n    subgraph finish [Finish]\n        merge[Merge]\n        report[Report]\n        merge --&gt;|left_path,right_path| report\n    end\n\n    prep --&gt;|left_path| l1\n    prep --&gt;|right_path| r1\n    l3 --&gt;|left_path| merge\n    r2 --&gt;|right_path| merge\n</code></pre> <p>Rendered output:</p> <p></p>"},{"location":"gallery/#branching-and-multipath","title":"Branching and Multipath","text":""},{"location":"gallery/#asymmetric-tree","title":"Asymmetric Tree","text":"<p>One root branching into three paths of different depths.</p> <p>CLI command:</p> <pre><code>nf-metro render examples/topologies/asymmetric_tree.mmd -o asymmetric_tree.svg\n</code></pre> Mermaid source <pre><code>%%metro title: Asymmetric Tree\n%%metro style: dark\n%%metro line: short | Short Branch | #e63946\n%%metro line: medium | Medium Branch | #2db572\n%%metro line: long | Long Branch | #0570b0\n\ngraph LR\n    subgraph root [Root]\n        input[Input]\n        dispatch[Dispatch]\n        input --&gt;|short,medium,long| dispatch\n    end\n\n    subgraph branch_short [Short]\n        s1[Quick]\n        s2[Result]\n        s1 --&gt;|short| s2\n    end\n\n    subgraph branch_med_1 [Medium Step 1]\n        m1[Medium A]\n        m2[Medium B]\n        m1 --&gt;|medium| m2\n    end\n\n    subgraph branch_med_2 [Medium Step 2]\n        m3[Medium C]\n        m4[Medium D]\n        m3 --&gt;|medium| m4\n    end\n\n    subgraph branch_long_1 [Long Step 1]\n        l1[Long A]\n        l2[Long B]\n        l1 --&gt;|long| l2\n    end\n\n    subgraph branch_long_2 [Long Step 2]\n        l3[Long C]\n        l4[Long D]\n        l3 --&gt;|long| l4\n    end\n\n    subgraph branch_long_3 [Long Step 3]\n        l5[Long E]\n        l6[Long F]\n        l5 --&gt;|long| l6\n    end\n\n    dispatch --&gt;|short| s1\n    dispatch --&gt;|medium| m1\n    dispatch --&gt;|long| l1\n    m2 --&gt;|medium| m3\n    l2 --&gt;|long| l3\n    l4 --&gt;|long| l5\n</code></pre> <p>Rendered output:</p> <p></p>"},{"location":"gallery/#complex-multipath","title":"Complex Multipath","text":"<p>Four lines taking different routes through six sections.</p> <p>CLI command:</p> <pre><code>nf-metro render examples/topologies/complex_multipath.mmd -o complex_multipath.svg\n</code></pre> Mermaid source <pre><code>%%metro title: Complex Multipath\n%%metro style: dark\n%%metro line: fast | Fast Path | #e63946\n%%metro line: standard | Standard Path | #2db572\n%%metro line: detailed | Detailed Analysis | #0570b0\n%%metro line: legacy | Legacy Path | #f5c542\n\ngraph LR\n    subgraph input_sec [Input]\n        raw[Raw Data]\n        validate[Validate]\n        raw --&gt;|fast,standard,detailed,legacy| validate\n    end\n\n    subgraph fast_track [Fast Track]\n        quick_align[Quick Align]\n        quick_quant[Quick Quant]\n        quick_align --&gt;|fast| quick_quant\n    end\n\n    subgraph full_preprocess [Full Pre-process]\n        trim[Trim]\n        filter[Filter]\n        qc_check[QC Check]\n        trim --&gt;|standard,detailed,legacy| filter\n        filter --&gt;|standard,detailed,legacy| qc_check\n    end\n\n    subgraph standard_analysis [Standard Analysis]\n        align[Align]\n        quant[Quantify]\n        align --&gt;|standard,legacy| quant\n    end\n\n    subgraph deep_analysis [Deep Analysis]\n        hq_align[HQ Align]\n        dedup[Dedup]\n        hq_quant[HQ Quantify]\n        hq_align --&gt;|detailed| dedup\n        dedup --&gt;|detailed| hq_quant\n    end\n\n    subgraph output_sec [Output]\n        aggregate[Aggregate]\n        report[Report]\n        aggregate --&gt;|fast,standard,detailed,legacy| report\n    end\n\n    validate --&gt;|fast| quick_align\n    validate --&gt;|standard,detailed,legacy| trim\n    qc_check --&gt;|standard,legacy| align\n    qc_check --&gt;|detailed| hq_align\n    quick_quant --&gt;|fast| aggregate\n    quant --&gt;|standard,legacy| aggregate\n    hq_quant --&gt;|detailed| aggregate\n</code></pre> <p>Rendered output:</p> <p></p>"},{"location":"gallery/#multi-line-bundles","title":"Multi-line Bundles","text":""},{"location":"gallery/#multi-line-bundle","title":"Multi Line Bundle","text":"<p>Six lines travelling through the same three-section chain.</p> <p>CLI command:</p> <pre><code>nf-metro render examples/topologies/multi_line_bundle.mmd -o multi_line_bundle.svg\n</code></pre> Mermaid source <pre><code>%%metro title: Multi-Line Bundle\n%%metro style: dark\n%%metro line: line1 | Line 1 | #e63946\n%%metro line: line2 | Line 2 | #2db572\n%%metro line: line3 | Line 3 | #0570b0\n%%metro line: line4 | Line 4 | #f5c542\n%%metro line: line5 | Line 5 | #ff8c00\n%%metro line: line6 | Line 6 | #7b2d3b\n\ngraph LR\n    subgraph input_sec [Input]\n        raw[Raw]\n        qc[QC]\n        raw --&gt;|line1,line2,line3,line4,line5,line6| qc\n    end\n\n    subgraph process_sec [Processing]\n        align[Align]\n        sort[Sort]\n        dedup[Dedup]\n        align --&gt;|line1,line2,line3,line4,line5,line6| sort\n        sort --&gt;|line1,line2,line3,line4,line5,line6| dedup\n    end\n\n    subgraph output_sec [Output]\n        quant[Quantify]\n        report[Report]\n        quant --&gt;|line1,line2,line3,line4,line5,line6| report\n    end\n\n    qc --&gt;|line1,line2,line3,line4,line5,line6| align\n    dedup --&gt;|line1,line2,line3,line4,line5,line6| quant\n</code></pre> <p>Rendered output:</p> <p></p>"},{"location":"gallery/#mixed-port-sides","title":"Mixed Port Sides","text":"<p>A section with both RIGHT and BOTTOM exits.</p> <p>CLI command:</p> <pre><code>nf-metro render examples/topologies/mixed_port_sides.mmd -o mixed_port_sides.svg\n</code></pre> Mermaid source <pre><code>%%metro title: Mixed Port Sides\n%%metro style: dark\n%%metro line: horizontal | Horizontal Flow | #e63946\n%%metro line: vertical | Vertical Flow | #0570b0\n\ngraph LR\n    subgraph origin [Origin]\n        start[Start]\n        fork[Fork]\n        start --&gt;|horizontal,vertical| fork\n    end\n\n    subgraph right_sec [Right Section]\n        r1[Right A]\n        r2[Right B]\n        r1 --&gt;|horizontal| r2\n    end\n\n    subgraph bottom_sec [Bottom Section]\n        b1[Bottom A]\n        b2[Bottom B]\n        b1 --&gt;|vertical| b2\n    end\n\n    fork --&gt;|horizontal| r1\n    fork --&gt;|vertical| b1\n</code></pre> <p>Rendered output:</p> <p></p>"},{"location":"gallery/#realistic-pipelines","title":"Realistic Pipelines","text":""},{"location":"gallery/#rnaseq-lite","title":"Rnaseq Lite","text":"<p>Simplified RNA-seq pipeline with three analysis routes.</p> <p>CLI command:</p> <pre><code>nf-metro render examples/topologies/rnaseq_lite.mmd -o rnaseq_lite.svg\n</code></pre> Mermaid source <pre><code>%%metro title: RNA-seq Lite\n%%metro style: dark\n%%metro line: star | STAR + Salmon | #2db572\n%%metro line: hisat | HISAT2 | #f5c542\n%%metro line: pseudo | Pseudo-alignment | #e63946\n\ngraph LR\n    subgraph preprocessing [Pre-processing]\n        input[Input]\n        fastqc_raw[FastQC]\n        fastp[FastP]\n        trimgalore[Trim Galore!]\n        fastqc_trim[FastQC]\n        filter[SortMeRNA]\n        fastqc_filt[FastQC]\n\n        input --&gt;|star,hisat,pseudo| fastqc_raw\n        fastqc_raw --&gt;|star,hisat,pseudo| fastp\n        fastqc_raw --&gt;|star,hisat,pseudo| trimgalore\n        fastp --&gt;|star,hisat,pseudo| fastqc_trim\n        trimgalore --&gt;|star,hisat,pseudo| fastqc_trim\n        fastqc_trim --&gt;|star,hisat,pseudo| filter\n        filter --&gt;|star,hisat,pseudo| fastqc_filt\n    end\n\n    subgraph genome_align [Genome alignment]\n        star_align[STAR]\n        hisat_align[HISAT2]\n        umi_dedup[UMI-tools dedup]\n        salmon_quant[Salmon]\n        rsem_quant[featureCounts]\n\n        star_align --&gt;|star| umi_dedup\n        hisat_align --&gt;|hisat| umi_dedup\n        umi_dedup --&gt;|star| salmon_quant\n        umi_dedup --&gt;|hisat| rsem_quant\n    end\n\n    subgraph pseudo_align [Pseudo-alignment]\n        salmon_pseudo[Salmon]\n        tximport[tximport]\n        summarized_exp[Sum. Exp.]\n\n        salmon_pseudo --&gt;|pseudo| tximport\n        tximport --&gt;|pseudo| summarized_exp\n    end\n\n    subgraph postprocessing [Post-processing]\n        samtools[SAMtools]\n        picard[Picard]\n        bedtools[BEDTools]\n        bigwig[bedGraphToBigWig]\n\n        samtools --&gt;|star,hisat| picard\n        picard --&gt;|star,hisat| bedtools\n        bedtools --&gt;|star,hisat| bigwig\n    end\n\n    subgraph qc_report [QC &amp; Reporting]\n        rseqc[RSeQC]\n        dupradar[dupRadar]\n        featurecounts[featureCounts]\n        multiqc[MultiQC]\n\n        rseqc --&gt;|star,hisat| dupradar\n        dupradar --&gt;|star,hisat| featurecounts\n        featurecounts --&gt;|star,hisat| multiqc\n    end\n\n    fastqc_filt --&gt;|star| star_align\n    fastqc_filt --&gt;|hisat| hisat_align\n    fastqc_filt --&gt;|pseudo| salmon_pseudo\n    salmon_quant --&gt;|star| samtools\n    rsem_quant --&gt;|hisat| samtools\n    bigwig --&gt;|star,hisat| rseqc\n</code></pre> <p>Rendered output:</p> <p></p>"},{"location":"gallery/#variant-calling","title":"Variant Calling","text":"<p>Variant calling pipeline with four lines sharing alignment.</p> <p>CLI command:</p> <pre><code>nf-metro render examples/topologies/variant_calling.mmd -o variant_calling.svg\n</code></pre> Mermaid source <pre><code>%%metro title: Variant Calling Pipeline\n%%metro style: dark\n%%metro line: wgs | Whole Genome | #2db572\n%%metro line: wes | Whole Exome | #0570b0\n%%metro line: panel | Targeted Panel | #f5c542\n%%metro line: rna_var | RNA Variants | #e63946\n\ngraph LR\n    subgraph input_qc [Input &amp; QC]\n        input[Input]\n        fastqc[FastQC]\n        fastp[FastP]\n        trimgalore[Trim Galore!]\n        fastqc_trim[FastQC]\n\n        input --&gt;|wgs,wes,panel,rna_var| fastqc\n        fastqc --&gt;|wgs,wes,panel,rna_var| fastp\n        fastqc --&gt;|wgs,wes,panel,rna_var| trimgalore\n        fastp --&gt;|wgs,wes,panel,rna_var| fastqc_trim\n        trimgalore --&gt;|wgs,wes,panel,rna_var| fastqc_trim\n    end\n\n    subgraph alignment [Alignment]\n        bwa[BWA-MEM2]\n        star_align[STAR]\n        samtools[SAMtools sort]\n        markdup[MarkDuplicates]\n        bqsr[BQSR]\n\n        bwa --&gt;|wgs,wes,panel| samtools\n        star_align --&gt;|rna_var| samtools\n        samtools --&gt;|wgs,wes,panel,rna_var| markdup\n        markdup --&gt;|wgs,wes,panel,rna_var| bqsr\n    end\n\n    subgraph dna_calling [DNA Variant Calling]\n        haplotypecaller[HaplotypeCaller]\n        deepvariant[DeepVariant]\n        strelka[Strelka2]\n        merge_vcf[Merge VCFs]\n\n        haplotypecaller --&gt;|wgs| merge_vcf\n        deepvariant --&gt;|wes| merge_vcf\n        strelka --&gt;|panel| merge_vcf\n    end\n\n    subgraph rna_calling [RNA Variant Calling]\n        splitncigar[SplitNCigar]\n        rna_hc[HaplotypeCaller]\n        rna_filter[FilterVariants]\n\n        splitncigar --&gt;|rna_var| rna_hc\n        rna_hc --&gt;|rna_var| rna_filter\n    end\n\n    subgraph annotation [Annotation &amp; Filtering]\n        vep[VEP]\n        snpsift[SnpSift]\n        filter_pass[Filter PASS]\n\n        vep --&gt;|wgs,wes,panel,rna_var| snpsift\n        snpsift --&gt;|wgs,wes,panel,rna_var| filter_pass\n    end\n\n    subgraph reporting [Reporting]\n        bcftools_stats[bcftools stats]\n        multiqc[MultiQC]\n\n        bcftools_stats --&gt;|wgs,wes,panel,rna_var| multiqc\n    end\n\n    fastqc_trim --&gt;|wgs,wes,panel| bwa\n    fastqc_trim --&gt;|rna_var| star_align\n    bqsr --&gt;|wgs| haplotypecaller\n    bqsr --&gt;|wes| deepvariant\n    bqsr --&gt;|panel| strelka\n    bqsr --&gt;|rna_var| splitncigar\n    merge_vcf --&gt;|wgs,wes,panel| vep\n    rna_filter --&gt;|rna_var| vep\n    filter_pass --&gt;|wgs,wes,panel,rna_var| bcftools_stats\n</code></pre> <p>Rendered output:</p> <p></p>"},{"location":"gallery/#fold-topologies","title":"Fold Topologies","text":""},{"location":"gallery/#fold-fan-across","title":"Fold Fan Across","text":"<p>Three lines diverge, converge at a fold, then continue on the return row.</p> <p>CLI command:</p> <pre><code>nf-metro render examples/topologies/fold_fan_across.mmd -o fold_fan_across.svg\n</code></pre> Mermaid source <pre><code>%%metro title: Proteomics Quantification Pipeline\n%%metro style: dark\n%%metro line: tmt | TMT Labeling | #e63946\n%%metro line: lfq | Label-Free | #457b9d\n%%metro line: dia | DIA | #2a9d8f\n\ngraph LR\n    subgraph sample_prep [Sample Preparation]\n        sp_input[Input]\n        sp_validate[Validate]\n        sp_extract[Extract]\n        sp_tag[Tag]\n        sp_filt_a[Filter A]\n        sp_filt_b[Filter B]\n        sp_merge[Merge]\n        sp_filter[QC Filter]\n        sp_qc[Final QC]\n\n        sp_input --&gt;|tmt,lfq,dia| sp_validate\n        sp_validate --&gt;|tmt,lfq,dia| sp_extract\n        sp_extract --&gt;|tmt,lfq,dia| sp_tag\n        sp_tag --&gt;|tmt,lfq,dia| sp_filt_a\n        sp_tag --&gt;|tmt,lfq,dia| sp_filt_b\n        sp_filt_a --&gt;|tmt,lfq,dia| sp_merge\n        sp_filt_b --&gt;|tmt,lfq,dia| sp_merge\n        sp_merge --&gt;|tmt,lfq,dia| sp_filter\n        sp_filter --&gt;|tmt,lfq,dia| sp_qc\n    end\n\n    subgraph tmt_quant [TMT Quantification]\n        tmt_label[Label]\n        tmt_frac[Fractionate]\n        tmt_pool[Pool]\n        tmt_quant_ms[Quantify]\n        tmt_check[Check]\n\n        tmt_label --&gt;|tmt| tmt_frac\n        tmt_frac --&gt;|tmt| tmt_pool\n        tmt_pool --&gt;|tmt| tmt_quant_ms\n        tmt_quant_ms --&gt;|tmt| tmt_check\n    end\n\n    subgraph lfq_quant [Label-Free Quantification]\n        lfq_align[Align]\n        lfq_quant_ms[Quantify]\n        lfq_norm[Normalize]\n\n        lfq_align --&gt;|lfq| lfq_quant_ms\n        lfq_quant_ms --&gt;|lfq| lfq_norm\n    end\n\n    subgraph dia_quant [DIA Quantification]\n        dia_window[Window]\n        dia_extract[Extract]\n        dia_quant_ms[Quantify]\n\n        dia_window --&gt;|dia| dia_extract\n        dia_extract --&gt;|dia| dia_quant_ms\n    end\n\n    subgraph normalize [Normalization]\n        norm_input[Input]\n        norm_calc[Calculate]\n        norm_apply[Apply]\n\n        norm_input --&gt;|tmt,lfq,dia| norm_calc\n        norm_calc --&gt;|tmt,lfq,dia| norm_apply\n    end\n\n    subgraph stat_analysis [Statistical Analysis]\n        stat_merge[Merge]\n        diff_expr[Diff. Expression]\n        pathway[Pathway]\n        volcano[Volcano Plot]\n\n        stat_merge --&gt;|tmt,lfq,dia| diff_expr\n        diff_expr --&gt;|tmt,lfq,dia| pathway\n        pathway --&gt;|tmt,lfq,dia| volcano\n    end\n\n    subgraph reporting [Reporting]\n        report_agg[Aggregate]\n        report_mqc[MultiQC]\n        report_final[Report]\n\n        report_agg --&gt;|tmt,lfq,dia| report_mqc\n        report_mqc --&gt;|tmt,lfq,dia| report_final\n    end\n\n    sp_qc --&gt;|tmt| tmt_label\n    sp_qc --&gt;|lfq| lfq_align\n    sp_qc --&gt;|dia| dia_window\n    tmt_check --&gt;|tmt| norm_input\n    lfq_norm --&gt;|lfq| norm_input\n    dia_quant_ms --&gt;|dia| norm_input\n    norm_apply --&gt;|tmt,lfq,dia| stat_merge\n    volcano --&gt;|tmt,lfq,dia| report_agg\n</code></pre> <p>Rendered output:</p> <p></p>"},{"location":"gallery/#fold-double","title":"Fold Double","text":"<p>Ten-section linear pipeline with two fold points (serpentine layout).</p> <p>CLI command:</p> <pre><code>nf-metro render examples/topologies/fold_double.mmd -o fold_double.svg\n</code></pre> Mermaid source <pre><code>%%metro title: WGS/WES Variant Pipeline\n%%metro style: dark\n%%metro line: wgs | Whole Genome | #2db572\n%%metro line: wes | Whole Exome | #0570b0\n\ngraph LR\n    subgraph input_qc [Input &amp; QC]\n        iq_input[Input]\n        iq_fastqc[FastQC]\n        iq_trim[Trim]\n        iq_filter[Filter]\n\n        iq_input --&gt;|wgs,wes| iq_fastqc\n        iq_fastqc --&gt;|wgs,wes| iq_trim\n        iq_trim --&gt;|wgs,wes| iq_filter\n    end\n\n    subgraph alignment [Alignment]\n        al_bwa[BWA-MEM2]\n        al_sort[Sort]\n        al_dedup[Dedup]\n        al_bqsr[BQSR]\n\n        al_bwa --&gt;|wgs,wes| al_sort\n        al_sort --&gt;|wgs,wes| al_dedup\n        al_dedup --&gt;|wgs,wes| al_bqsr\n    end\n\n    subgraph base_recal [Base Recalibration]\n        br_recal[Recalibrate]\n        br_apply[Apply]\n        br_validate[Validate]\n        br_index[Index]\n\n        br_recal --&gt;|wgs,wes| br_apply\n        br_apply --&gt;|wgs,wes| br_validate\n        br_validate --&gt;|wgs,wes| br_index\n    end\n\n    subgraph calling [Variant Calling]\n        vc_hc[HaplotypeCaller]\n        vc_genotype[Genotype]\n        vc_merge[Merge VCF]\n        vc_norm[Normalize]\n\n        vc_hc --&gt;|wgs,wes| vc_genotype\n        vc_genotype --&gt;|wgs,wes| vc_merge\n        vc_merge --&gt;|wgs,wes| vc_norm\n    end\n\n    subgraph hard_filter [Hard Filtering]\n        hf_sel_snp[Select SNPs]\n        hf_sel_indel[Select Indels]\n        hf_filt_snp[Filter SNPs]\n        hf_filt_indel[Filter Indels]\n\n        hf_sel_snp --&gt;|wgs,wes| hf_filt_snp\n        hf_filt_snp --&gt;|wgs,wes| hf_sel_indel\n        hf_sel_indel --&gt;|wgs,wes| hf_filt_indel\n    end\n\n    subgraph annotation [Annotation]\n        an_vep[VEP]\n        an_snpsift[SnpSift]\n        an_classify[Classify]\n        an_prioritize[Prioritize]\n\n        an_vep --&gt;|wgs,wes| an_snpsift\n        an_snpsift --&gt;|wgs,wes| an_classify\n        an_classify --&gt;|wgs,wes| an_prioritize\n    end\n\n    subgraph interpretation [Interpretation]\n        ip_pathogenicity[Pathogenicity]\n        ip_frequency[Frequency]\n        ip_clinical[Clinical]\n        ip_aggregate[Aggregate]\n\n        ip_pathogenicity --&gt;|wgs,wes| ip_frequency\n        ip_frequency --&gt;|wgs,wes| ip_clinical\n        ip_clinical --&gt;|wgs,wes| ip_aggregate\n    end\n\n    subgraph integration [Integration]\n        ig_merge[Merge Calls]\n        ig_validate[Validate]\n        ig_qc[QC Check]\n        ig_finalize[Finalize]\n\n        ig_merge --&gt;|wgs,wes| ig_validate\n        ig_validate --&gt;|wgs,wes| ig_qc\n        ig_qc --&gt;|wgs,wes| ig_finalize\n    end\n\n    subgraph reporting [Reporting]\n        rp_summary[Summary]\n        rp_multiqc[MultiQC]\n        rp_report[Report]\n\n        rp_summary --&gt;|wgs,wes| rp_multiqc\n        rp_multiqc --&gt;|wgs,wes| rp_report\n    end\n\n    subgraph archival [Archival]\n        ar_archive[Archive]\n        ar_compress[Compress]\n\n        ar_archive --&gt;|wgs,wes| ar_compress\n    end\n\n    iq_filter --&gt;|wgs,wes| al_bwa\n    al_bqsr --&gt;|wgs,wes| br_recal\n    br_index --&gt;|wgs,wes| vc_hc\n    vc_norm --&gt;|wgs,wes| hf_sel_snp\n    hf_filt_indel --&gt;|wgs,wes| an_vep\n    an_prioritize --&gt;|wgs,wes| ip_pathogenicity\n    ip_aggregate --&gt;|wgs,wes| ig_merge\n    ig_finalize --&gt;|wgs,wes| rp_summary\n    rp_report --&gt;|wgs,wes| ar_archive\n</code></pre> <p>Rendered output:</p> <p></p>"},{"location":"gallery/#fold-stacked-branch","title":"Fold Stacked Branch","text":"<p>Stacked analysis sections feeding through a fold into branching targets.</p> <p>CLI command:</p> <pre><code>nf-metro render examples/topologies/fold_stacked_branch.mmd -o fold_stacked_branch.svg\n</code></pre> Mermaid source <pre><code>%%metro title: Single-Cell Multi-Omics Pipeline\n%%metro style: dark\n%%metro line: rna | scRNA-seq | #e63946\n%%metro line: atac | scATAC-seq | #457b9d\n%%metro line: protein | CITE-seq | #f5c542\n\ngraph LR\n    subgraph preprocessing [Preprocessing]\n        pp_input[Input]\n        pp_demux[Demux]\n        pp_qc_raw[Raw QC]\n        pp_trim[Trim]\n        pp_filter[Filter]\n        pp_qc_clean[Clean QC]\n        pp_classify[Classify]\n        pp_sort[Sort]\n\n        pp_input --&gt;|rna,atac,protein| pp_demux\n        pp_demux --&gt;|rna,atac,protein| pp_qc_raw\n        pp_qc_raw --&gt;|rna,atac,protein| pp_trim\n        pp_trim --&gt;|rna,atac,protein| pp_filter\n        pp_filter --&gt;|rna,atac,protein| pp_qc_clean\n        pp_qc_clean --&gt;|rna,atac,protein| pp_classify\n        pp_classify --&gt;|rna,atac,protein| pp_sort\n    end\n\n    subgraph rna_analysis [RNA Analysis]\n        rna_norm[Normalize]\n        rna_cluster[Cluster]\n        rna_markers[Markers]\n        rna_trajectories[Trajectories]\n        rna_dge[DGE]\n\n        rna_norm --&gt;|rna| rna_cluster\n        rna_cluster --&gt;|rna| rna_markers\n        rna_markers --&gt;|rna| rna_trajectories\n        rna_trajectories --&gt;|rna| rna_dge\n    end\n\n    subgraph atac_analysis [ATAC Analysis]\n        atac_peaks[Peak Calling]\n        atac_motif[Motif Analysis]\n        atac_footprint[Footprinting]\n        atac_coverage[Coverage]\n\n        atac_peaks --&gt;|atac| atac_motif\n        atac_motif --&gt;|atac| atac_footprint\n        atac_footprint --&gt;|atac| atac_coverage\n    end\n\n    subgraph protein_analysis [Protein Analysis]\n        prot_norm[Normalize]\n        prot_quant[Quantify]\n        prot_viz[Visualize]\n\n        prot_norm --&gt;|protein| prot_quant\n        prot_quant --&gt;|protein| prot_viz\n    end\n\n    subgraph integration [Multi-Modal Integration]\n        int_merge[Merge Modalities]\n        int_wnn[WNN]\n        int_umap[UMAP]\n\n        int_merge --&gt;|rna,atac,protein| int_wnn\n        int_wnn --&gt;|rna,atac,protein| int_umap\n    end\n\n    subgraph bio_interp [Biological Interpretation]\n        bio_celltype[Cell Typing]\n        bio_trajectory[Trajectory]\n        bio_grn[Gene Reg. Network]\n\n        bio_celltype --&gt;|rna,atac| bio_trajectory\n        bio_trajectory --&gt;|rna,atac| bio_grn\n    end\n\n    subgraph tech_qc [Technical QC]\n        tqc_doublet[Doublet Detection]\n        tqc_ambient[Ambient RNA]\n        tqc_metrics[QC Metrics]\n\n        tqc_doublet --&gt;|protein| tqc_ambient\n        tqc_ambient --&gt;|protein| tqc_metrics\n    end\n\n    subgraph final_report [Final Report]\n        fr_aggregate[Aggregate]\n        fr_report[Render Report]\n\n        fr_aggregate --&gt;|rna,atac,protein| fr_report\n    end\n\n    pp_sort --&gt;|rna| rna_norm\n    pp_sort --&gt;|atac| atac_peaks\n    pp_sort --&gt;|protein| prot_norm\n    rna_dge --&gt;|rna| int_merge\n    atac_coverage --&gt;|atac| int_merge\n    prot_viz --&gt;|protein| int_merge\n    int_umap --&gt;|rna,atac| bio_celltype\n    int_umap --&gt;|protein| tqc_doublet\n    bio_grn --&gt;|rna,atac| fr_aggregate\n    tqc_metrics --&gt;|protein| fr_aggregate\n</code></pre> <p>Rendered output:</p> <p></p>"}]}